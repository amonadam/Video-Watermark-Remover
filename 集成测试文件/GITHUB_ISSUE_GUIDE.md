# GitHub缺陷提交指南

## 概述

本文档提供了使用GitHub Issues记录缺陷的详细步骤和模板。缺陷报告应包含清晰的复现步骤、预期结果和实际结果，以便开发团队能够快速定位和修复问题。

## 缺陷报告模板

### 基本模板

```markdown
**缺陷标题**: [简短描述缺陷]

**缺陷类型**: [功能缺陷/性能问题/安全漏洞/用户体验/其他]

**优先级**: [紧急/高/中/低]

**严重程度**: [严重/重要/一般/轻微]

**环境信息**:
- 操作系统: [例如：Windows 10, macOS 12, Ubuntu 20.04]
- Python版本: [例如：3.9.12]
- 软件版本: [例如：1.0.0]
- 依赖版本: [例如：PyQt5 5.15.7, OpenCV 4.5.5]

---

## 问题描述

[详细描述缺陷的现象和影响]

## 复现步骤

1. [第一步操作]
2. [第二步操作]
3. [第三步操作]
4. ...

## 预期结果

[描述应该发生的正确行为]

## 实际结果

[描述实际发生的错误行为]

## 截图/视频

[如果有相关的截图或视频，请附上]

## 日志信息

[如果有相关的错误日志，请附上]

## 附加信息

[任何其他有助于解决问题的信息]
```

## 缺陷提交详细步骤

### 步骤1：登录GitHub

1. 打开浏览器，访问 [https://github.com](https://github.com)
2. 使用您的GitHub账号登录
3. 如果没有账号，请先注册

### 步骤2：导航到项目仓库

1. 在GitHub搜索框中输入项目名称（例如：`waterremove`）
2. 点击进入项目仓库主页
3. 确认您有权限提交Issues（通常需要是项目成员或仓库允许公开Issues）

### 步骤3：创建新Issue

1. 在项目仓库主页，点击顶部的 **"Issues"** 标签
2. 点击右侧的绿色按钮 **"New issue"**
3. 进入创建Issue页面

### 步骤4：填写缺陷信息

#### 4.1 选择Issue模板（如果有）

- 如果项目提供了Issue模板，选择合适的模板（例如：Bug Report）
- 如果没有模板，直接填写信息

#### 4.2 填写标题

- 标题应简洁明了，概括缺陷的核心问题
- 示例：
  - "视频去水印后出现黄色异常区域"
  - "管理员无法查看其他用户的操作日志"
  - "登录压力测试成功率低于预期"

#### 4.3 填写描述

使用上述模板填写详细信息：

**示例1：视频去水印缺陷**

```markdown
**缺陷标题**: 视频去水印后在复杂背景下出现黄色异常区域

**缺陷类型**: 功能缺陷

**优先级**: 高

**严重程度**: 重要

**环境信息**:
- 操作系统: Windows 10
- Python版本: 3.9.12
- 软件版本: 1.0.0
- 依赖版本: PyQt5 5.15.7, OpenCV 4.5.5, moviepy 1.0.3

---

## 问题描述

在处理复杂背景的视频时，去水印后的区域会出现黄色异常，严重影响视频质量。问题主要出现在背景颜色丰富、纹理复杂的场景中。

## 复现步骤

1. 打开视频去水印软件
2. 选择一个背景复杂的视频文件（例如：包含多种颜色和纹理的视频）
3. 点击"开始处理"按钮
4. 等待处理完成
5. 查看输出视频

## 预期结果

水印区域应该被平滑修复，颜色和纹理与周围背景自然融合，不应该出现明显的颜色异常。

## 实际结果

水印区域出现明显的黄色异常，与周围背景颜色不协调，视觉效果很差。

## 截图/视频

[附上问题截图或视频链接]

## 日志信息

```
处理帧 150 时出错: 颜色校正失败
处理帧 151 时出错: 颜色校正失败
...
```

## 附加信息

- 问题在简单背景下不会出现
- 水印位于视频右下角时问题更明显
- 尝试调整了颜色校正参数，但问题仍然存在
```

**示例2：权限控制缺陷**

```markdown
**缺陷标题**: 管理员用户无法查看其他用户的操作日志

**缺陷类型**: 功能缺陷

**优先级**: 高

**严重程度**: 重要

**环境信息**:
- 操作系统: Windows 10
- Python版本: 3.9.12
- 软件版本: 1.0.0

---

## 问题描述

使用管理员账号登录后，无法在操作日志界面查看其他用户的操作记录，只能看到自己的操作日志。这不符合预期的权限控制逻辑。

## 复现步骤

1. 使用管理员账号（admin/admin123）登录系统
2. 导航到操作日志界面
3. 尝试查看所有用户的操作记录
4. 观察显示的日志列表

## 预期结果

管理员应该能够查看所有用户的操作日志，包括操作类型、操作结果、IP地址等详细信息。

## 实际结果

只显示了管理员自己的操作日志，无法看到其他用户的操作记录。

## 截图/视频

[附上操作日志界面的截图]

## 日志信息

```
SQL查询: SELECT * FROM operation_logs WHERE username = 'admin'
预期查询: SELECT * FROM operation_logs
```

## 附加信息

- 数据库中确实存在其他用户的操作记录
- 普通用户只能查看自己的日志是正确的
- 问题出现在 `operation_logger.py` 的 `get_operation_logs` 方法中
```

#### 4.4 添加标签（Labels）

- 在右侧的 **"Labels"** 区域，选择合适的标签
- 常用标签：
  - `bug` - 缺陷
  - `enhancement` - 功能增强
  - `documentation` - 文档问题
  - `performance` - 性能问题
  - `security` - 安全问题
  - `high-priority` - 高优先级
  - `low-priority` - 低优先级

#### 4.5 指定负责人（Assignees）

- 在右侧的 **"Assignees"** 区域，选择负责修复此缺陷的开发人员
- 如果不确定，可以留空，由维护者分配

#### 4.6 设置里程碑（Milestones）

- 如果项目使用里程碑，在 **"Milestone"** 区域选择合适的里程碑
- 这有助于跟踪缺陷修复的进度

### 步骤5：提交Issue

1. 检查所有信息是否填写完整
2. 点击页面底部的绿色按钮 **"Submit new issue"**
3. Issue创建成功后，会自动分配一个编号（例如：#123）

### 步骤6：跟踪缺陷状态

1. 在Issues列表中，可以查看所有缺陷的状态
2. 常见状态：
   - `Open` - 缺陷已提交，待处理
   - `In Progress` - 正在修复中
   - `Closed` - 已修复并关闭
3. 可以订阅Issue，在有更新时收到通知

## 缺陷管理最佳实践

### 1. 搜索现有Issue

在提交新Issue前，先搜索是否已有类似的缺陷报告：

1. 在Issues页面顶部的搜索框中输入关键词
2. 查看搜索结果，避免重复提交

### 2. 提供清晰的信息

- 使用清晰、简洁的语言描述问题
- 提供详细的复现步骤
- 附上截图、视频或日志
- 说明问题的严重程度和影响范围

### 3. 保持Issue更新

- 如果有新的发现或信息，及时更新Issue
- 回复维护者的问题
- 测试修复后的版本，提供反馈

### 4. 遵循项目规范

- 遵循项目的Issue模板（如果有）
- 使用项目规定的标签和分类
- 保持专业和礼貌的沟通

## 缺陷分类示例

### 功能缺陷

- 功能无法正常工作
- 功能行为不符合预期
- 功能缺失

### 性能问题

- 处理速度过慢
- 内存占用过高
- 响应时间过长

### 安全漏洞

- 权限控制失效
- 数据泄露风险
- 注入攻击漏洞

### 用户体验

- 界面显示错误
- 操作流程不顺畅
- 文字描述不清

## 常见错误及避免方法

### 错误1：信息不完整

**问题**: Issue描述过于简单，缺少关键信息

**避免方法**:
- 使用完整的模板
- 提供详细的复现步骤
- 附上相关的日志和截图

### 错误2：重复提交

**问题**: 同一缺陷被多次提交

**避免方法**:
- 提交前搜索现有Issue
- 查看是否已有类似问题
- 如果存在，在现有Issue中补充信息

### 错误3：标题不清晰

**问题**: Issue标题过于模糊，无法快速了解问题

**避免方法**:
- 使用简洁明确的标题
- 包含关键信息（模块、功能、问题）
- 示例："视频处理器在处理大文件时崩溃" 比 "程序崩溃" 更好

### 错误4：缺少环境信息

**问题**: 没有提供运行环境信息，难以复现问题

**避免方法**:
- 始终提供操作系统、Python版本、软件版本
- 列出关键依赖的版本
- 说明特殊配置或环境变量

## 缺陷生命周期

1. **提交** (Submitted)
   - 用户提交缺陷报告

2. **确认** (Confirmed)
   - 维护者确认缺陷存在
   - 分配优先级和严重程度

3. **分配** (Assigned)
   - 指定开发人员负责修复

4. **修复中** (In Progress)
   - 开发人员正在修复缺陷

5. **待测试** (Ready for Testing)
   - 修复完成，等待测试验证

6. **已修复** (Fixed)
   - 测试通过，缺陷已修复

7. **关闭** (Closed)
   - Issue关闭

## 联系方式

如果在提交Issue过程中遇到问题，可以：

- 查看项目的贡献指南（CONTRIBUTING.md）
- 联系项目维护者
- 在项目的讨论区（Discussions）提问

## 参考资料

- [GitHub Issues 官方文档](https://docs.github.com/en/issues)
- [如何写出优秀的Bug报告](https://github.com/torvalds/linux/blob/master/Documentation/process/submitting-patches.rst)
- [缺陷报告最佳实践](https://www.chromium.org/developers/bug-reporting-guidelines)
